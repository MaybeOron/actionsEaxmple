name: GitHub Actions Demo
on:
  push:
    branches: ["main", "BRANCH2"]
env:
  var1: Var1
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:

      - name: Check out repository code
        uses: actions/checkout@v2
        
      - name: Get branch name
        id: branch-name
        uses: tj-actions/branch-names@v5
        
      - uses: c-py/action-dotenv-to-setenv@v2
        with:
          env-file: .${{ steps.branch-name.outputs.current_branch }}env

      - name: Some other action
        id: vars
        run: |
          echo "Variable 1: $V1"
          echo "Variable 2: $V2"
          echo "Variable 3: $V3"
          echo "::set-output name=my_var::thisVar"
      - run: echo " env $V1 $V2 event."
      
      - name: Use variable setup in previous step
        run: echo "I'm using variable ${{ steps.vars.outputs.my_var }}"
        
      - name: this name is from ${{ steps.vars.outputs.my_var }}"
        run: echo "I'm using variable ${{ steps.vars.outputs.my_var }}"

