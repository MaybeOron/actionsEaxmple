
name: GitHub Actions Demo
on:
  push:
    branches: ["BRANCH2","main"]
env:
  var1: Var1
jobs:
  Explore-GitHub-Actions:
    strategy:
      matrix:
        include:
          - branch: refs/heads/BRANCH2
          - branch: refs/heads/main
          
    runs-on: ubuntu-latest
    steps:

      - name: Check out repository code
        uses: actions/checkout@v2
        
      - name: Get branch name
        id: branch-name
        uses: tj-actions/branch-names@v5
        
      - uses: c-py/action-dotenv-to-setenv@v2
        with:
          env-file: .${{ steps.branch-name.outputs.current_branch }}env

      - name: Some other action
        id: vars
        run: |
          echo "::set-output name=my_var::$V1"

      - name: this is a var -> ${{ steps.vars.outputs.my_var }}
        run: echo "I'm using variable ${{ steps.vars.outputs.my_var }}"
